<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Change Password</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f6fa; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin:0; }
  .container { background: #fff; padding: 30px 25px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); width: 400px; }
  h2 { text-align: center; margin-bottom: 20px; color: #007bff; }
  form .form-row { display: flex; flex-direction: column; margin-bottom: 15px; }
  form label { font-weight: bold; margin-bottom: 5px; }
  form input { padding: 10px; border-radius: 6px; border: 1px solid #ccc; }
  form input[type="submit"] { background: #28a745; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; margin-top: 10px; }
  form input[type="submit"]:hover { background: #218838; }
  #pwdMessage { margin-top: 15px; font-weight: bold; text-align: center; }
</style>
</head>
<body>

<div class="container">
  <h2>Change Password</h2>
  <form id="changePasswordForm">
    <div class="form-row">
      <label for="currentPwd">Current Password:</label>
      <input type="password" id="currentPwd" placeholder="Enter current password" required>
    </div>
    <div class="form-row">
      <label for="newPwd">New Password:</label>
      <input type="password" id="newPwd" placeholder="Enter new password" required>
    </div>
    <div class="form-row">
      <label for="confirmPwd">Confirm Password:</label>
      <input type="password" id="confirmPwd" placeholder="Confirm new password" required>
    </div>
    <input type="submit" value="Change Password">
  </form>
  <div id="pwdMessage"></div>
</div>

<script src="aqj.js"></script> 
<script>
  const currentUser = localStorage.getItem("currentUser") || "";
  const changeForm = document.getElementById("changePasswordForm");
  const pwdMessage = document.getElementById("pwdMessage");

  changeForm.addEventListener("submit", e => {
    e.preventDefault();
    pwdMessage.innerText = "";

    const currentPwd = document.getElementById("currentPwd").value;
    const newPwd = document.getElementById("newPwd").value;
    const confirmPwd = document.getElementById("confirmPwd").value;

    // Find logged-in user
    const userIndex = users.findIndex(u => u.name === currentUser);
    if(userIndex === -1){
      alert("User not found!");
      return;
    }

    if(users[userIndex].password !== currentPwd){
      alert("Current password is incorrect!");
      return;
    }

    if(newPwd !== confirmPwd){
      alert("New password and confirm password do not match!");
      return;
    }

    // Update password in memory
    users[userIndex].password = newPwd;

    // Optionally save to localStorage for persistence
    // localStorage.setItem("users", JSON.stringify(users));

    pwdMessage.style.color = "green";
    pwdMessage.innerText = "âœ… Password changed successfully!";
    changeForm.reset();
  });
</script>

</body>
</html>
